# dts/bindings/zmk,analog-input.yaml
description: |
  Input driver for ADC io channel with support for scan mode

compatible: "zmk,analog-input"

include: [base.yaml]

properties:
  sampling-hz:
    type: int
    required: true
    description: Sampling frequency in Hz
    
  mode:
    type: string
    enum: ["single", "scan"]
    description: |
      Operating mode of the ADC. "single" mode reads channels one by one,
      while "scan" mode uses hardware scanning to read multiple channels.
    default: "single"
    
  scan-sequence:
    type: array
    description: |
      List of ADC channel IDs to scan when in scan mode. Each entry
      corresponds to a channel in the order they will be sampled.
    schema:  # 改为 schema 而非 items
      type: int  # 每个元素的类型
    required: false

child-binding:
  description: Per-channel configuration settings
  properties:
    io-channels:
      type: phandle-array
      required: true
    mv-mid:
      type: int
      required: true
    mv-min-max:
      type: int
      required: true
    mv-deadzone:
      type: int
      default: 10
    invert:
      type: boolean
    report-on-change-only:
      type: boolean
    scale-multiplier:
      type: int
      default: 1
    scale-divisor:
      type: int
      default: 70
    evt-type:
      type: int
      required: true
    input-code:
      type: int
      required: true
